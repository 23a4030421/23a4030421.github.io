<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta id="viewport" content="width=device-width, initial-scale=1">
    <title>QC Teky</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  </head>
  <body>
    <div class="container-sm shadow my-5">
        <div class="mx-5 py-5">
            <div class="mb-3">
                <form id="qc">
                <label class="form-label text-danger fs-4">Họ tên người QC:*</label>
                <input id="nguoiqc" class="form-control form-control-lg" type="text">
              </div>
              <div class="mb-3">
                <label class="form-label text-danger fs-4">Họ tên giáo viên chính hoặc trợ giảng tại cơ sở*</label>
                <input id="giaovien" class="form-control form-control-lg" type="text">
              </div>
              <div class="mb-3">
                <label class="form-label text-danger fs-4">Danh Sách học sinh:* (mỗi học sinh 1 dòng)</label>
                <textarea id="dshs" class="form-control form-control-lg" placeholder="Tran Van A "  style="height: 200px"></textarea>
              </div>
              <div class="mb-3">
                <label class="form-label text-danger fs-4">Mã lớp:*</label>
                <input id="batch" class="form-control form-control-lg" type="text">
              </div>
              <div class="mb-3">
                <label class="form-label text-danger fs-4">Bài học số*</label>
                <input id="lession" class="form-control form-control-lg" type="number" placeholder="5">
              </div>
              <div class="mb-3">
                <label class="form-label text-danger fs-4">Ngày:*(ngày, tháng đủ 2 ký tự)</label>
                <input id="date" class="form-control form-control-lg" type="text" placeholder="25/04/2023">
              </div>
              <div class="mt-5">
                <button type="button" onclick="taolink()" class="btn btn-primary btn-lg">Tạo Link</button>
                <button type="button" onclick="reset()" class="btn btn-danger btn-lg">Reset</button>
              </div>
            </div>
        </form>
        <div class="mx-5 pb-5">
            <div class="col-4" id="list">
                
            </div>
            
            
            </div>
        
      </div>

      <script>
        function reset() {
            var form = document.getElementById("qc");
            form.reset();
        }

        
        function taolink() {
        var nguoiqc = document.getElementById("nguoiqc").value;
        var giaovien = document.getElementById("giaovien").value;
        var dshs = document.getElementById("dshs").value;
        var lisths = dshs.split("\n");
        var batch = document.getElementById("batch").value;
        var lession = document.getElementById("lession").value;
        var date = (document.getElementById("date").value).split("/");
        var list = document.getElementById("list");
        var listhtml = '';
        for (var i = 0; i < lisths.length; i++) {
            var link=`https://docs.google.com/forms/d/e/1FAIpQLSe7N7zp5lgfhfislyhb_wEYeYR_ZxTmBzJFon2XdhrNNpiAKQ/viewform?`
            +`entry.64083122=${nguoiqc}`
            +`&entry.1683238168=Center 1 - CG`
            +`&entry.1653070127=Bài ${lession}`
            +`&entry.1872634931=${giaovien}`
            +`&entry.581147237=${lisths[i]}`
            +`&entry.1799409028=${batch}`
            +`&entry.1813570528_year=${date[2]}`
            +`&entry.1813570528_month=${date[1]}`
            +`&entry.1813570528_day=${date[0]}`
            +`&entry.1742218151=Không có lỗi`
            +`&entry.1052446544=Không có lỗi`;


            var html =   `<div class="row my-2">`
                        +`<a href=${link.replace(/ /g, "%20")} target="_blank">`
                        +`<button type="button" class="btn btn-primary btn-lg">${lisths[i]}</button>`
                        +`</a></div>`
                listhtml+=html


        }
        list.innerHTML = listhtml;      
}
      </script>
  </body>
</html>
